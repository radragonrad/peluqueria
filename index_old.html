<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Peluquer√≠a - Reserva tu cita</title>
  <link rel="icon" href="assets/icon.png" type="image/png" />
  <link rel="stylesheet" href="css/style.css" />
  <!-- Opcional: Vue.js para interactividad -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<script>
  window.addEventListener('scroll', function() {
    const heroSection = document.querySelector('.hero-section');
    const heroBg = document.querySelector('.hero-background img');
    const scrollY = window.scrollY;
    const maxHeight = window.innerHeight;

    // Calcula opacidad seg√∫n el scroll
    let opacity = 1 - (scrollY / maxHeight);
    if (opacity < 0) opacity = 0;

    // Aplica transformaci√≥n para zoom suave
    const scale = 1 + (scrollY * 0.0005); // Zoom lento hacia abajo
    heroBg.style.transform = `scale(${Math.min(scale, 1.1)})`;
    heroBg.style.opacity = opacity;
  });
</script>
<body>
  <header class="header">
    <div class="logo-container">
      <img src="assets/logo.png" alt="Logo" class="logo" />
    </div>
    <nav class="nav-menu">
      <ul>
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="#sobre-nosotros">Sobre nosotros</a></li>
        <li><a href="#servicios">Servicios</a></li>
        <li><a href="#galeria">Galer√≠a</a></li>
        <li><a href="#contacto">Contacto y horario</a></li>
        <!-- <li class="btn-reserva"><a href="login.html">RESERVA TU CITA</a></li> -->
         <li id="auth-status"></li>
      </ul>
    </nav>
    <div class="social-icons">
      <a href="https://www.instagram.com/rgutierrez212" target="_blank" rel="noopener" aria-label="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
          <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
          <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
        </svg>
      </a>
    </div>
  </header>

<section id="inicio" >

  <main class="hero-section">
    <div class="hero-content">
      <h1>R√öBEN PELUQUEROS</h1>
      <h2>TU PELUQUER√çA EN VILLANUEVA DEL ARISCAL</h2>
      <a href="login.html" class="cta-button">RESERVA TU CITA</a>
    </div>
  </main>
</section>

<!-- Secci√≥n: Sobre nosotros -->
<section id="sobre-nosotros" class="service-section">
  <div class="container">
    <h2>Sobre Nosotros</h2>
    <div class="service-content">
      <div class="service-text">
        <p>Aqu√≠ no hacemos ‚Äúcortes de cat√°logo‚Äù.</p>
        <p>Cada corte nace de una conversaci√≥n: ¬øqu√© llevas puesto hoy? ¬øvas al instituto, al trabajo o a salir por la noche? ¬øte gusta llevarlo corto, con volumen, despeinado o impecable?</p>
        <p>Nos adaptamos a tu estilo, a tu rutina y a lo que t√∫ quieras proyectar. Usamos herramientas limpias, productos de calidad y sobre todo‚Ä¶ <strong>escuchamos</strong>.</p>
        <p>No importa si es la primera vez que vienes o si ya eres de los que repiten cada mes: aqu√≠ no hay prisas, ni miradas raras. Solo buen rollo, consejos √∫tiles y un resultado que te haga sentir bien contigo mismo.</p>
        <p>Y si no sabes muy bien qu√© quieres‚Ä¶ ¬°tranquilo! Te ayudamos a encontrar ese look que te representa, sin inventos, sin modas pasajeras que no van contigo.</p>
        <p><strong>Porque un buen corte no solo cambia tu pelo‚Ä¶ cambia tu d√≠a.</strong></p>
      </div>
      <div class="service-image">
        <img src="assets/salon.jpg" />
      </div>
    </div>
  </div>
</section>

<!-- Secci√≥n: Nuestros Servicios -->
<!-- Secci√≥n: Nuestros Servicios -->
<section id="servicios" class="services-section">
  <div class="container">
    <h2 class="section-title">Servicios</h2>
    <p class="section-subtitle">Cortes Profesionales</p>
    
    <!-- Contenedor Vue para servicios din√°micos -->
    <div id="app-servicios">
      <div class="services-grid">
        <div v-for="servicio in servicios" :key="servicio.id" class="service-card">
          <div class="icon" v-html="servicio.icono"></div>
          <h3>{{ servicio.nombre }}</h3>
          <p>{{ servicio.descripcion || 'Descripci√≥n no disponible' }}</p>
          <div v-if="usuarioLogueado" style="margin-top:1rem;">
            <div class="service-price" style="font-weight:bold; color:#e75480; margin-bottom:0.5rem;">
              {{ parseFloat(servicio.precio).toFixed(2) }}‚Ç¨
            </div>
            <button @click="abrirReserva(servicio)" 
                    style="background:#e75480; color:white; border:none; padding:0.5rem 1rem; border-radius:6px; cursor:pointer;">
              Reservar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Modal de Reserva -->
<div id="reserva-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000;">
  <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#121212; padding:2rem; border-radius:16px; width:90%; max-width:500px; color:white;">
    <h3 id="reserva-titulo" style="color:#e75480; margin-bottom:1.5rem;"></h3>
    
    <div style="margin-bottom:1.5rem;">
      <label style="display:block; margin-bottom:0.5rem;">Fecha:</label>
      <input type="date" id="reserva-fecha" style="width:100%; padding:0.5rem; background:#1a1a1a; color:white; border:1px solid #333; border-radius:6px;">
    </div>
    
    <div style="margin-bottom:1.5rem;">
      <label style="display:block; margin-bottom:0.5rem;">Hora:</label>
      <select id="reserva-hora" style="width:100%; padding:0.5rem; background:#1a1a1a; color:white; border:1px solid #333; border-radius:6px;">
        <option value="">Selecciona una fecha primero</option>
      </select>
    </div>
    
    <div style="display:flex; gap:1rem;">
      <button id="reserva-confirmar" style="flex:1; background:#e75480; color:white; border:none; padding:0.75rem; border-radius:8px;">Confirmar</button>
      <button id="reserva-cancelar" style="flex:1; background:#666; color:white; border:none; padding:0.75rem; border-radius:8px;">Cancelar</button>
    </div>
  </div>
</div>


<!-- Secci√≥n: Galer√≠a -->
<section id="galeria" class="gallery-section">
  <div class="container">
    <h2 class="section-title">Galer√≠a</h2>
    <p class="section-subtitle">Nuestros Trabajos</p>

    <div class="gallery-grid">
      <!-- Repite este bloque por cada foto -->
      <div class="gallery-item">
        <img src="assets/galeria/corte-01.jpg" alt="Fade con pelo largo y texturizado" loading="lazy" />
      </div>
      <div class="gallery-item">
        <img src="assets/galeria/corte-02.jpg" alt="Corte con flequillo corto y degradado" loading="lazy" />
      </div>
      <div class="gallery-item">
        <img src="assets/galeria/corte-03.jpg" alt="Degradado bajo con contorno definido" loading="lazy" />
      </div>
      <div class="gallery-item">
        <img src="assets/galeria/corte-04.jpg" alt="Corte rizado con degradado medio" loading="lazy" />
      </div>
      <div class="gallery-item">
        <img src="assets/galeria/corte-05.jpg" alt="Quiff texturizado con degradado alto" loading="lazy" />
      </div>
      <div class="gallery-item">
        <img src="assets/galeria/corte-06.jpg" alt="Corte rizado con flequillo y degradado" loading="lazy" />
      </div>
      <div class="gallery-item">
        <img src="assets/galeria/corte-07.jpg" alt="Corte texturizado con degradado medio" loading="lazy" />
      </div>
      <div class="gallery-item">
        <img src="assets/galeria/corte-08.jpg" alt="Corte con efecto mojado y ondas naturales + degradado bajo" loading="lazy" />
      </div>
      <!-- A√±ade m√°s si quieres -->
    </div>
  </div>
</section>

<section id="contacto" class="contact-section">
  <div class="container">
    <div class="contact-bg" style="background-image: url('assets/galeria/contact-bg2.jpg');"></div>
    <h2>CONTACTA CON NOSOTROS</h2>
    <p>En breve te responderemos para saber m√°s sobre tu consulta</p>

    <div class="contact-content">
      <!-- Columna izquierda: info -->
      <div class="contact-info">
        <h3>Tu estilo, nuestro arte</h3>
        <p>En nuestro centro, fusionamos tradici√≥n y tendencia para ofrecerte lo mejor en cuidado personal. Desde cortes cl√°sicos y modernos en nuestra barber√≠a, hasta tratamientos faciales y corporales personalizados para hombres y mujeres.</p>

        <div class="contact-details">
          <div class="detail-item">
            <span>üìû</span>
            <strong>657 55 33 77</strong>
          </div>
          <div class="detail-item">
            <span>‚úâÔ∏è</span>
            <strong>rgutierrez@gmail.com</strong>
          </div>
          <div class="detail-item">
            <span>üìç</span>
            <strong>C. San Jose, 9, 41808 Villanueva del Ariscal, Sevilla</strong>
          </div>
          <div class="detail-item">
            <span>üïí</span>
            <strong>Horario:</strong><br>
            Lunes a viernes: 9:30 ‚Äì 20:00<br>
            S√°bado: 9:30 ‚Äì 14:00<br>
            Domingo: Cerrado<br>           
          </div>
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1052.2295749092325!2d-6.14085775426826!3d37.39629061744004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd12140844ef1a31%3A0x4432a5241f4f1a40!2sC.%20San%20Jose%2C%209%2C%2041808%20Villanueva%20del%20Ariscal%2C%20Sevilla!5e0!3m2!1ses!2ses!4v1770449941186!5m2!1ses!2ses" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

      </div>

      <!-- Columna derecha: formulario + testimonios -->
      <div class="contact-form-wrapper">
        <form id="contactForm" class="contact-form" action="backend/contact.php" method="POST">
          <input type="text" name="nombre" placeholder="Nombre y apellido*" required />
          <input type="tel" name="telefono" placeholder="Tel√©fono*" required />
          <input type="email" name="email" placeholder="Email*" required />
          <select name="servicio" required>
            <option value="" disabled selected>¬øEn qu√© servicio est√°s interesado?*</option>
            <option value="Corte cl√°sico">Corte cl√°sico</option>
            <option value="Corte + barba">Corte + barba</option>
            <option value="Arreglo de barba">Arreglo de barba</option>
            <option value="Perfilado de cejas">Perfilado de cejas</option>
            <option value="Decoloraci√≥n">Decoloraci√≥n</option>
            <option value="Mechas">Mechas</option>
            <option value="Servicio VIP">Servicio VIP</option>
            <option value="Otro">Otro</option>
          </select>
          <textarea name="mensaje" placeholder="Mensaje" rows="4"></textarea>
          <label class="checkbox">
            <input type="checkbox" name="privacidad" required />
            He le√≠do y acepto la <a href="#" style="color:#e75480;">pol√≠tica de privacidad</a>
          </label>
          <button type="submit" class="btn">ENVIAR</button>
        </form>


      </div>
    </div>
  </div>
  <!-- Fondo difuminado -->

</section>

<!-- Secci√≥n de Reservas (oculta por defecto) -->
<section id="reservas" style="display:none; padding: 5rem 0; background: #121212;">
  <div class="container">
    <h2 style="text-align:center; color:#e75480; margin-bottom:2rem;">Reserva tu cita</h2>
    <div id="booking-content">
      <p style="text-align:center; color:#f5f5f5;">Cargando servicios...</p>
    </div>
  </div>
</section>


<footer class="main-footer">
  <div class="container">
    <div class="footer-grid">
      <!-- Columna 1: Contacto -->
      <div class="footer-column">
        <h3>CONTACTO</h3>
        <ul class="contact-list">
          <li><span>üìû</span> Tel√©fono: (+34) 657 55 33 77</li>
          <li><span>üí¨</span> WhatsApp: (+34) 657 55 33 77</li>          
        </ul>
      </div>

      <!-- Columna 2: Direcci√≥n -->
      <div class="footer-column">
        <h3>DIRECCI√ìN</h3>
        <p>          
          C. Nueva, 11<br>
          41808  Villanueva del Ariscal (Sevilla)
        </p>
      </div>

      <!-- Columna 3: S√≠guenos -->
      <div class="footer-column">
        <h3>S√çGUENOS</h3>
        <ul class="social-list">
          <li><a href="https://www.facebook.com/tuusuario" target="_blank" rel="noopener"><span>üìò</span> Facebook</a></li>
          <li><a href="https://twitter.com/tuusuario" target="_blank" rel="noopener"><span>ùïè</span> Twitter</a></li>
          <li><a href="https://www.instagram.com/rgutierrez212" target="_blank" rel="noopener"><span>üì∏</span> Instagram</a></li>
        </ul>
      </div>
    </div>

    <!-- Pie inferior -->
    <div class="footer-bottom">
      <p>
        SG Sal√≥n Experience ¬© 2026 &nbsp; ‚Ä¢ &nbsp;
        <a href="#aviso-legal">Aviso Legal</a> &nbsp; ‚Ä¢ &nbsp;
        <a href="#privacidad">Pol√≠tica de Privacidad</a> &nbsp; ‚Ä¢ &nbsp;
        <a href="#cookies">Aviso de Cookies</a> &nbsp; ‚Ä¢ &nbsp;        
      </p>
    </div>
  </div>
</footer>

  <!-- Lightbox -->
<div id="lightbox" class="lightbox">
  <span class="close">&times;</span>
  <img class="lightbox-content" id="lightbox-img">
  <div class="caption"></div>
</div>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>
  document.querySelectorAll('.gallery-item img').forEach(img => {
    img.addEventListener('click', function() {
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      const caption = lightbox.querySelector('.caption');

      lightboxImg.src = this.src;
      caption.textContent = this.alt || '';
      lightbox.style.display = 'block';

      // Cerrar al hacer clic en el overlay
      lightbox.onclick = function(e) {
        if (e.target === lightbox) {
          lightbox.style.display = 'none';
        }
      };

      // Cerrar con tecla Esc
      document.addEventListener('keydown', function closeOnEsc(e) {
        if (e.key === 'Escape') {
          lightbox.style.display = 'none';
          document.removeEventListener('keydown', closeOnEsc);
        }
      });
    });
  });

  // Cerrar con el bot√≥n √ó
  document.querySelector('.close').addEventListener('click', function() {
    document.getElementById('lightbox').style.display = 'none';
  });

  document.getElementById('contactForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  const formData = new FormData(this);
  const submitBtn = this.querySelector('.btn');
  const originalText = submitBtn.textContent;
  
  submitBtn.textContent = 'Enviando...';
  submitBtn.disabled = true;

  try {
    const response = await fetch(this.action, {
      method: 'POST',
      body: formData
    });
    
    const result = await response.json();
    
    if (result.status === 'success') {
      alert(result.message);
      this.reset(); // Limpia el formulario
    } else {
      alert('Error: ' + result.message);
    }
  } catch (err) {
    alert('No se pudo conectar con el servidor.');
  } finally {
    submitBtn.textContent = originalText;
    submitBtn.disabled = false;
  }
});




// Funci√≥n para cargar precios (si usas la versi√≥n no-Vue)
async function loadServicePrices() {
  // ... tu c√≥digo actual ...
}

// Funci√≥n para mostrar secci√≥n de reservas
function showReservasSection() {
  const reservasSection = document.getElementById('reservas');
  if (reservasSection) {
    reservasSection.style.display = 'block';
    
    // Scroll suave
    setTimeout(() => {
      const titulo = document.getElementById('reservas-titulo');
      if (titulo) titulo.scrollIntoView({ behavior: 'smooth' });
    }, 300);
  }
}


function selectService(serviceId) {
  alert('Reserva para el servicio ID: ' + serviceId + ' (pr√≥ximamente)');
}




const { createApp, ref, onMounted } = Vue;

// Verificar si el usuario est√° logueado
async function checkAuth() {
  try {
    const res = await fetch('./backend/api/check_auth.php');
    const data = await res.json();
    return data.logged_in && data.rol === 'usuario';
  } catch {
    return false;
  }
}

// Crear la app de servicios
createApp({
  setup() {
    const servicios = ref([]);
    const usuarioLogueado = ref(false);

    onMounted(async () => {
      // Verificar login
      usuarioLogueado.value = await checkAuth();
      
      // Cargar servicios
      try {
        const res = await fetch('./backend/api/get_servicios.php');
        const data = await res.json();
        servicios.value = data;
      } catch (error) {
        console.error('Error al cargar servicios:', error);
      }
    });

    const abrirReserva = (servicio) => {
      abrirModal(servicio);
    };

    return {
      servicios,
      usuarioLogueado,
      abrirReserva
    };
  }
}).mount('#app-servicios');

// Cargar horas disponibles
async function cargarHoras(fecha, duracion) {
  const select = document.getElementById('reserva-hora');
  select.innerHTML = '<option>Cargando...</option>';
  
  try {
    const res = await fetch(`./backend/api/get_horario_disponible.php?fecha=${fecha}&duracion=${duracion}`);
    const data = await res.json();
    
    select.innerHTML = '';
    if (data.horarios && data.horarios.length > 0) {
      data.horarios.forEach(h => {
        if (h.disponible) {
          const option = document.createElement('option');
          option.value = h.hora;
          option.textContent = h.hora;
          select.appendChild(option);
        }
      });
      if (select.options.length === 0) {
        select.innerHTML = '<option>No hay horarios disponibles</option>';
      }
    } else {
      select.innerHTML = '<option>No hay horarios disponibles</option>';
    }
  } catch (error) {
    select.innerHTML = '<option>Error al cargar horarios</option>';
  }
}


document.addEventListener('DOMContentLoaded', async function() {
  const authStatus = document.getElementById('auth-status');
  if (!authStatus) return;

  try {
    const res = await fetch('./backend/api/check_auth.php');
    const data = await res.json();

    if (data.logged_in && data.rol === 'usuario') {
      // Usuario logueado: mostrar email + bot√≥n de cierre
      authStatus.innerHTML = `
        <span style="color:white; margin-right:10px;">${data.email}</span>
        <a href="logout.php" style="color:#e75480; text-decoration:underline;">Cerrar sesi√≥n</a>
      `;
      
      // Cargar precios y mostrar secci√≥n de reservas
      loadServicePrices();
      showReservasSection();
    } else {
      // No logueado: mostrar bot√≥n de login
      authStatus.innerHTML = `<li class="btn-reserva"><a href="login.html">RESERVA TU CITA</a></li>`;
    }
  } catch (error) {
    console.error('Error al verificar autenticaci√≥n:', error);
    authStatus.innerHTML = `<li class="btn-reserva"><a href="login.html">RESERVA TU CITA</a></li>`;
  }
});

// Funci√≥n para cargar precios (si usas la versi√≥n no-Vue)
async function loadServicePrices() {
  // ... tu c√≥digo actual ...
}

// Funci√≥n para mostrar secci√≥n de reservas
function showReservasSection() {
  const reservasSection = document.getElementById('reservas');
  if (reservasSection) {
    reservasSection.style.display = 'block';
    
    // Scroll suave
    setTimeout(() => {
      const titulo = document.getElementById('reservas-titulo');
      if (titulo) titulo.scrollIntoView({ behavior: 'smooth' });
    }, 300);
  }
}



// Confirmar reserva
async function confirmarReserva() {
  const fecha = document.getElementById('reserva-fecha').value;
  const hora = document.getElementById('reserva-hora').value;
  
  if (!fecha || !hora || !servicioSeleccionado) {
    alert('Por favor, completa todos los campos.');
    return;
  }
  
  try {
    const res = await fetch('./backend/api/crear_reserva.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        servicio_id: servicioSeleccionado.id,
        fecha: fecha,
        hora: hora
      })
    });
    
    const data = await res.json();
    if (res.ok) {
      alert('¬°Reserva confirmada! Hemos enviado un correo con los detalles.');
      cerrarModal();
      location.reload();
    } else {
      alert('Error: ' + data.message);
    }
  } catch (error) {
    alert('Error al crear la reserva.');
  }
}

// Abrir modal de reserva
function abrirModal(servicio) {
  servicioSeleccionado = servicio;
  document.getElementById('reserva-titulo').textContent = `Reservar: ${servicio.nombre}`;
  document.getElementById('reserva-fecha').value = '';
  document.getElementById('reserva-hora').innerHTML = '<option>Selecciona una fecha primero</option>';
  document.getElementById('reserva-modal').style.display = 'block';
  
  // Establecer fecha m√≠nima (hoy)
  const hoy = new Date().toISOString().split('T')[0];
  document.getElementById('reserva-fecha').min = hoy;
}

// Cerrar modal
function cerrarModal() {
  document.getElementById('reserva-modal').style.display = 'none';
}

</script>

</body>
</html>